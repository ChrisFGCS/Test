

<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Babylon Template</title>

  <style>

  #fps {
                  position: absolute;
                  background-color: black;
                  border: 2px solid red;
                  text-align: center;
                  font-size: 16px;
                  color: white;
                  top: 15px;
                  right: 10px;
                  width: 60px;
                  height: 20px;
              }

  html, body {
    overflow: hidden;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }

  #renderCanvas {
    width: 100%;
    height: 100%;
    margin: auto;
    touch-action: none;
  }
  </style>

  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
  <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
  <script src="https://cdn.babylonjs.com/gui/babylon.gui.js"></script>
</head>

<body>

  <div id="fps">0</div>

  <canvas id="renderCanvas" touch-action="none"></canvas> <!-- touch-action="none" for best results from PEP -->

  <script>
  const canvas = document.getElementById("renderCanvas"); // Get the canvas element
  const engine = new BABYLON.Engine(canvas, true, {doNotHandleContextLost: true}); // Generate the BABYLON 3D engine
  engine.enableOfflineSupport = false;

  var createScene = function () {
    // This creates a basic Babylon Scene object (non-mesh)
    var scene = new BABYLON.Scene(engine);
    //Orbit Camera
    var camera = new BABYLON.ArcRotateCamera("camera", BABYLON.Tools.ToRadians(250), BABYLON.Tools.ToRadians(85), 150, BABYLON.Vector3.Zero(), scene);
    // This targets the camera to scene origin
    camera.setTarget(BABYLON.Vector3.Zero());
    // This attaches the camera to the canvas
    camera.attachControl(canvas, true);

    scene.clearColor = new BABYLON.Color3(0.2, 0.2, 0.2);

    //This initialises 3 Hemispheric Lights in the 3 axes to create the illusion of 360 degree light
    var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(-1, 0, 0), scene);
    light.intensity = 3;
    var light2 = new BABYLON.HemisphericLight("light2", new BABYLON.Vector3(0, 1, 0), scene);
    light2.intensity = 3;
    var light3 = new BABYLON.HemisphericLight("light3", new BABYLON.Vector3(0, 0.5, -1), scene);
    light3.intensity = 3;

    // Skybox


    //Model import
    var buildingMesh = BABYLON.SceneLoader.Append("https://raw.githubusercontent.com/ChrisFGCS/Test/main/Blender/", "240 Blackfriar's Road (Tex).glb", scene, function (newMeshes) {
      var helper = scene.createDefaultEnvironment({
        createSkybox: false,
        enableGroundMirror: true,
        groundYBias: 0.01,
      });



      //GUI

      let plane = BABYLON.MeshBuilder.CreatePlane("plane", { height: 73, width: 3.5 });
      plane.scaling = new BABYLON.Vector3(0.1, 0.1, 0.1)

      var mouseOver = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("mouseOverUI")
      //Front face slope
      //Populate with buttons planes
      for (let i = 0; i < 15; i++) {
        let planei = plane.clone("Plane")
        planei.scaling = new BABYLON.Vector3(1, 1 - i * 0.017, 1);
        planei.position.x = 39.5 - i * 3.5
        planei.position.y = -4 - i * 0.65
        planei.position.z = -12.1

        //Apply button properties to planes
        var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(planei, 1, 1, true);
        let buttoni = BABYLON.GUI.Button.CreateSimpleButton("but1");
        buttoni.color = "white";
        buttoni.fontSize = 50;
        buttoni.background = "teal";
        buttoni.alpha = 0.2;

        //Initialise container rectangle for hover-over popup
        let rect1 = new BABYLON.GUI.Rectangle();
        rect1.width = "250px";
        rect1.height = "80px";
        rect1.background = "Beige";
        mouseOver.addControl(rect1);

        //Populate containter rectangle with text
        let label = new BABYLON.GUI.TextBlock();
        label.text = "Started: (Date) (Time)\nCompleted: (Date) (Time)\nIssues: ";
        label.fontSize = "20%";
        label.lineSpacing = 3;
        label.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;

        rect1.addControl(label);

        //Offset rectangle to prevent cursor overlap and hide
        rect1.linkWithMesh(planei);
        rect1.linkOffsetX = 140;
        rect1.alpha = 0;

        //Make button opaque and show popup when cursor enters button mesh
        buttoni.onPointerEnterObservable.add(function() {
          buttoni.alpha = 1;
          rect1.alpha = 1;
        });
        //Hide rectangle and make button translucent again when cursor leaves
        buttoni.onPointerOutObservable.add(function() {
          buttoni.alpha = 0.2;
          rect1.alpha = 0;
        });
        advancedTexture.addControl(buttoni);
      }

      //Steeper slope
      for (let i = 0; i < 5; i++) {
        let planei = plane.clone("Plane")
        planei.scaling = new BABYLON.Vector3(1, 0.75 - i * 0.165, 1);
        planei.position.x = -12.5 - i * 3.5
        planei.position.y = -14 - i * 5.9
        planei.position.z = -12.1

        var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(planei, 1, 1, true);
        let buttoni = BABYLON.GUI.Button.CreateSimpleButton("but1");
        buttoni.color = "white";
        buttoni.fontSize = 50;
        buttoni.background = "teal";
        buttoni.alpha = 0.2;

        let rect1 = new BABYLON.GUI.Rectangle();
        rect1.width = "250px";
        rect1.height = "80px";
        rect1.background = "Beige";
        mouseOver.addControl(rect1);

        let label = new BABYLON.GUI.TextBlock();
        label.text = "Started: (Date) (Time)\nCompleted: (Date) (Time)\nIssues: ";
        label.fontSize = "20%";
        label.lineSpacing = 3;
        label.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;

        rect1.addControl(label);

        rect1.linkWithMesh(planei);
        rect1.linkOffsetX = 140;
        rect1.alpha = 0;
        buttoni.onPointerEnterObservable.add(function() {
          buttoni.alpha = 1;
          rect1.alpha = 1;
        });
        buttoni.onPointerOutObservable.add(function() {
          buttoni.alpha = 0.2;
          rect1.alpha = 0;
        });
        advancedTexture.addControl(buttoni);
      }

      //Rear face
      for (let i = 0; i < 19; i++) {
        let planei = plane.clone("Plane")
        planei.scaling = new BABYLON.Vector3(1, 1, 1);
        planei.position.x = 54 - i * 3.5
        planei.position.y = -4
        planei.position.z = 12.1

        var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(planei, 1, 1, true);
        let buttoni = BABYLON.GUI.Button.CreateSimpleButton("but1");
        buttoni.color = "white";
        buttoni.fontSize = 50;
        buttoni.background = "teal";
        buttoni.alpha = 0.2;

        let rect1 = new BABYLON.GUI.Rectangle();
        rect1.width = "250px";
        rect1.height = "80px";
        rect1.background = "Beige";
        mouseOver.addControl(rect1);

        let label = new BABYLON.GUI.TextBlock();
        label.text = "Started: (Date) (Time)\nCompleted: (Date) (Time)\nIssues: ";
        label.fontSize = "20%";
        label.lineSpacing = 3;
        label.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;

        rect1.addControl(label);

        rect1.linkWithMesh(planei);
        rect1.linkOffsetX = 140;
        rect1.alpha = 0;
        buttoni.onPointerEnterObservable.add(function() {
          buttoni.alpha = 1;
          rect1.alpha = 1;
        });
        buttoni.onPointerOutObservable.add(function() {
          buttoni.alpha = 0.2;
          rect1.alpha = 0;
        });
        advancedTexture.addControl(buttoni);
      }

      //Right face
      for (let i = 0; i < 9; i++) {
        let planei = plane.clone("Plane")
        planei.scaling = new BABYLON.Vector3(1, 1, 1);
        planei.position.x = 55.2 - i * 1.65
        planei.position.y = -4
        planei.position.z = 10.7 - i * 2.7
        planei.rotation.y = -1

        var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(planei, 1, 1, true);
        let buttoni = BABYLON.GUI.Button.CreateSimpleButton("but1");
        buttoni.color = "white";
        buttoni.fontSize = 50;
        buttoni.background = "teal";
        buttoni.alpha = 0.2;

        let rect1 = new BABYLON.GUI.Rectangle();
        rect1.width = "250px";
        rect1.height = "80px";
        rect1.background = "Beige";
        mouseOver.addControl(rect1);

        let label = new BABYLON.GUI.TextBlock();
        label.text = "Started: (Date) (Time)\nCompleted: (Date) (Time)\nIssues: ";
        label.fontSize = "20%";
        label.lineSpacing = 3;
        label.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;

        rect1.addControl(label);

        rect1.linkWithMesh(planei);
        rect1.linkOffsetX = 140;
        rect1.alpha = 0;
        buttoni.onPointerEnterObservable.add(function() {
          buttoni.alpha = 1;
          rect1.alpha = 1;
        });
        buttoni.onPointerOutObservable.add(function() {
          buttoni.alpha = 0.2;
          rect1.alpha = 0;
        });
        advancedTexture.addControl(buttoni);
      }

      //Left side Upper

      for (let i = 0; i < 8; i++) {
        let planei = plane.clone("Plane")
        planei.scaling = new BABYLON.Vector3(1, 0.75-i*0.1, 0.9);
        planei.position.x = -20.5+i*1.27
        planei.position.y = -12+i*5.8
        planei.position.z = -11+i*3.0
        planei.rotation.x = 0.265
        planei.rotation.y = 1.45
        planei.rotation.z = -0.03

        var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(planei, 1, 1, true);
        let buttoni = BABYLON.GUI.Button.CreateSimpleButton("but1");
        buttoni.color = "white";
        buttoni.fontSize = 50;
        buttoni.background = "teal";
        buttoni.alpha = 0.2;

        let rect1 = new BABYLON.GUI.Rectangle();
        rect1.width = "250px";
        rect1.height = "80px";
        rect1.background = "Beige";
        mouseOver.addControl(rect1);

        let label = new BABYLON.GUI.TextBlock();
        label.text = "Started: (Date) (Time)\nCompleted: (Date) (Time)\nIssues: ";
        label.fontSize = "20%";
        label.lineSpacing = 3;
        label.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;

        rect1.addControl(label);

        rect1.linkWithMesh(planei);
        rect1.linkOffsetX = 140;
        rect1.alpha = 0;
        buttoni.onPointerEnterObservable.add(function() {
          buttoni.alpha = 1;
          rect1.alpha = 1;
        });
        buttoni.onPointerOutObservable.add(function() {
          buttoni.alpha = 0.2;
          rect1.alpha = 0;
        });
        advancedTexture.addControl(buttoni);
      }

      //Left side Lower

      for (let i = 0; i < 9; i++) {
        let planei = plane.clone("Plane")
        planei.scaling = new BABYLON.Vector3(1, 0.95-i*0.11, 0.9);
        planei.position.x = -11.5-i*1.8
        planei.position.y = -5-i*4
        planei.position.z = 11-i*2.5
        planei.rotation.y = -0.94

        var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(planei, 1, 1, true);
        let buttoni = BABYLON.GUI.Button.CreateSimpleButton("but1");
        buttoni.color = "white";
        buttoni.fontSize = 50;
        buttoni.background = "teal";
        buttoni.alpha = 0.2;

        let rect1 = new BABYLON.GUI.Rectangle();
        rect1.width = "250px";
        rect1.height = "80px";
        rect1.background = "Beige";
        mouseOver.addControl(rect1);

        let label = new BABYLON.GUI.TextBlock();
        label.text = "Started: (Date) (Time)\nCompleted: (Date) (Time)\nIssues: ";
        label.fontSize = "20%";
        label.lineSpacing = 3;
        label.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;

        rect1.addControl(label);

        rect1.linkWithMesh(planei);
        rect1.linkOffsetX = 140;
        rect1.alpha = 0;
        buttoni.onPointerEnterObservable.add(function() {
          buttoni.alpha = 1;
          rect1.alpha = 1;
        });
        buttoni.onPointerOutObservable.add(function() {
          buttoni.alpha = 0.2;
          rect1.alpha = 0;
        });
        advancedTexture.addControl(buttoni);
      }

    });


    return scene;

  };

      let divFps = document.getElementById("fps");
  const scene = createScene(); //Call the createScene function

  // Register a render loop to repeatedly render the scene
  engine.runRenderLoop(function () {
    scene.render();
    divFps.innerHTML = engine.getFps().toFixed() + " fps";
  });

  // Watch for browser/canvas resize events
  window.addEventListener("resize", function () {
    engine.resize();
  });
  </script>


</body>


</html>
